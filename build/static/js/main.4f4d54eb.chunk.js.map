{"version":3,"sources":["components/PersonForm.js","components/Filter.js","components/Person.js","services/persons.js","App.js","index.js"],"names":["PersonForm","props","onSubmit","setToNewName","value","newName","onChange","handleNewName","newNumber","handleNewNumber","type","Filter","filtteri","handleFilter","Person","name","number","id","onClick","baseUrl","axios","get","then","response","data","newObject","post","delete","personObject","put","status","Notification","message","style","color","background","borderStyle","fontSize","borderRadius","padding","marginBottom","App","useState","persons","setPersons","setNewName","setNewNumber","showAll","setShowAll","setFilter","popMessage","setPopMessage","errorMessage","setErrorMessage","useEffect","personService","initialPersons","personsToShow","filter","person","toLowerCase","includes","handleDelete","e","window","confirm","target","currentPerson","preventDefault","names","map","toString","console","log","setTimeout","catch","error","newPerson","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4f4d54eb.chunk.js","sourcesContent":["import React from 'react'\n\nconst PersonForm = (props) => {\n    return(\n      <form onSubmit={props.setToNewName}>\n        <div>\n          name: <input value={props.newName} onChange={props.handleNewName} />\n        </div>\n        <div>\n          number: <input value={props.newNumber} onChange={props.handleNewNumber} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n    </form>\n    )\n  }\n\n  export default PersonForm","import React from 'react'\n\nconst Filter = (props) => {\n    return(\n      <div>\n        filter shown with: <input value={props.filtteri} onChange={props.handleFilter} />\n      </div>\n    )\n  }\n\nexport default Filter","import React from 'react'\n\nconst Person = (props) => {\n    return(\n    <div>\n      {props.name} {props.number} <button value={props.name} number={props.number} id={props.id} onClick={props.onClick}>delete</button>\n      \n    </div>\n    )\n    \n  }\n\n  export default Person\n  ","import axios from 'axios'\nconst baseUrl = '/api/persons/'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}  \n\nconst create = (newObject) => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst deletePerson = (props) => {\n    const request = axios.delete(baseUrl + props.id,  { data: { \n        id: props.id,\n        name: props.name,\n        number: props.number\n        }\n    }).then(response => {\n        \n    })\n    return request\n}\n\nconst update = (personObject, id) => {\n    const request = axios.put(baseUrl + id,  {\n        name: personObject.name,\n        number: personObject.number,\n        id: id\n\n    })\n    \n    return request.then(response => {\n        return response.status\n    })\n    \n}\n\nexport default {getAll, create, deletePerson, update}","import React, { useState, useEffect } from 'react'\nimport PersonForm from './components/PersonForm'\nimport Filter from './components/Filter'\nimport Person from './components/Person'\nimport personService from './services/persons'\n\nconst Notification = ( props ) => {\n\n  const notificationStyle = {\n    color: 'green',\n    background: 'lightgrey',\n    borderStyle: 'solid',\n    fontSize: 20,\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n\n  const errorStyle = {\n    color: 'red',\n    background: 'lightgrey',\n    borderStyle: 'solid',\n    fontSize: 20,\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n\n  if (props.message === null) {\n    return null\n  }\n\n  if (props.style === \"error\") {\n    return (\n      <div style={errorStyle}>\n        {props.message}\n      </div>\n    )\n  } else {\n    return (\n      <div style={notificationStyle}>\n        {props.message}\n      </div>\n    )\n  }\n}\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ showAll, setShowAll ] = useState(true)\n  const [ filtteri, setFilter ] = useState('')\n  const [ popMessage, setPopMessage] = useState(null)\n  const [ errorMessage, setErrorMessage] = useState(null)\n\n\n  \n  useEffect(() => {\n    personService\n    .getAll()\n    .then(initialPersons => {\n      setPersons(initialPersons)\n  })\n}, [])\n\n\n  const setToNewName = (e) => {\n    e.preventDefault()\n\n    const personObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    const names = persons.map(person => person.name)\n    const id = persons.filter(person => person.name === newName).map(person => person.id)\n\n    if (names.includes(newName)) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        \n        personService\n          .update(personObject, id.toString()) \n          .then(response => {\n            console.log(response)\n            if (response === 200) {\n              setPopMessage(\n                `${newName}'s number was successfully updated!`\n                )\n                setTimeout(() => {\n                  setPopMessage(null)\n                }, 3000)\n              }\n            }).catch(error => {\n              setErrorMessage(\n                `${error.response.data.error}`\n              )\n              setTimeout(() => {\n                setErrorMessage(null)\n              }, 5000)\n             }).then(response => {\n              personService\n                .getAll()\n                .then(initialPersons => {\n                  setPersons(initialPersons)\n            })\n            \n        })\n\n      } \n    } else {\n      personService\n        .create(personObject)\n        .then(newPerson => {\n          setPersons(persons.concat(newPerson))\n          setNewName('')\n          setNewNumber('')\n          \n          setPopMessage(\n            `${newName} was successfully added!`\n            )\n            setTimeout(() => {\n              setPopMessage(null)\n            }, 3000)\n        }).catch(error => {\n          setErrorMessage(\n            `${error.response.data.error}`\n          )\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n    }\n  }\n\n  const handleNewName = (e) => {\n    setNewName(e.target.value)\n  }\n\n  const handleNewNumber = (e) => {\n    setNewNumber(e.target.value)\n  }\n\n  const handleFilter = (e) => {\n    setShowAll(false)\n    setFilter(e.target.value)\n\n  }\n\n  const personsToShow = showAll\n  ? persons\n  : persons.filter(person => person.name.toLowerCase().includes(filtteri.toLowerCase()))\n\n  const handleDelete = (e) => {\n\n    if (window.confirm(`Delete ${e.target.value} ?`)) {\n\n      const currentPerson  = {\n        id: e.target.id,\n        name: e.target.value,\n        number: e.target.number\n      }\n\n      personService\n      .deletePerson(currentPerson)          \n      .then(response => {\n        personService\n          .getAll()\n          .then(initialPersons => {\n            setPersons(initialPersons)\n          })\n      })\n    }\n  }\n  \n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={popMessage} style=\"notification\"/>\n      <Notification message={errorMessage} style=\"error\"/>\n\n\n      <Filter filtteri={filtteri} handleFilter={handleFilter} />\n\n      <h2>Add a new</h2>\n      \n      <PersonForm setToNewName={setToNewName} newName={newName} handleNewName={handleNewName} newNumber={newNumber} handleNewNumber={handleNewNumber} />\n      \n      <h2>Numbers</h2>\n      <div>\n        {personsToShow.map(person => \n          <Person key={person.name} name={person.name} number={person.number} id={person.id} onClick={handleDelete}/>)\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n"],"sourceRoot":""}